module MaxPooling #(parameter POOL_SIZE = 2, parameter DATA_WIDTH = 8) (
    input clk,
    input rst,
    input [DATA_WIDTH-1:0] input_feature [0:POOL_SIZE*POOL_SIZE-1],
    output reg [DATA_WIDTH-1:0] output_feature
);
    
    always @(posedge clk or posedge rst) begin
        if (rst)
            output_feature <= 0;
        else
            output_feature <= (input_feature[0] > input_feature[1]) ? 
                              ((input_feature[0] > input_feature[2]) ? 
                               ((input_feature[0] > input_feature[3]) ? input_feature[0] : input_feature[3]) : 
                               ((input_feature[2] > input_feature[3]) ? input_feature[2] : input_feature[3])) :
                              ((input_feature[1] > input_feature[2]) ? 
                               ((input_feature[1] > input_feature[3]) ? input_feature[1] : input_feature[3]) : 
                               ((input_feature[2] > input_feature[3]) ? input_feature[2] : input_feature[3]));
    end
endmodule
